import{r as w,H as x,j as l,k as e,t as r,F as k,y as v,h as c,x as i,v as b,J as K}from"./auth-p59NCVpB.js";import{_ as F,d as B}from"./index-BaOz1LJw.js";const C={class:"kategorie-wrapper container py-4"},S={class:"card shadow-sm rounded-4"},j={class:"card-body p-0"},A={class:"table mb-0"},L={key:0},T={class:"fw-semibold"},W={class:"text-muted small"},$={key:0},z={key:1,class:"fst-italic text-secondary"},E={key:0,class:"badge bg-danger-subtle text-danger d-inline-flex align-items-center gap-1"},G={key:1,class:"badge bg-success-subtle text-success d-inline-flex align-items-center gap-1"},I={class:"text-end pe-4"},N={class:"d-inline-flex gap-1"},V=["onClick"],D=["onClick"],H={key:1},J={__name:"KategorieTrash",setup(M){const a=B(),d=w([]),o=async()=>{try{const n=await c.get("/kategorie/trash/list");d.value=n.data}catch{a.show("Fehler beim Laden des Papierkorbs","danger")}},u=async n=>{try{await c.patch(`/kategorie/${n}/restore`),a.show("Kategorie wiederhergestellt","success"),await o()}catch{a.show("Fehler beim Wiederherstellen","danger")}},f=async()=>{if(confirm("Wirklich alle gelöschten Kategorien endgültig löschen?"))try{const n=await c.delete("/kategorie/trash");a.show(n.data.message,"success"),await o()}catch{a.show("Fehler beim endgültigen Löschen","danger")}},p=async n=>{if(confirm("Wirklich diese Kategorie endgültig löschen?"))try{await c.delete(`/kategorie/${n}`),a.show("Kategorie dauerhaft gelöscht","success"),await o()}catch{a.show("Fehler beim endgültigen Löschen","danger")}};function m(n){if(!n)return"#333";let t=n.replace("#","");t.length===3&&(t=t.split("").map(h=>h+h).join(""));const s=parseInt(t,16),g=s>>16&255,_=s>>8&255,y=s&255;return .2126*g+.7152*_+.0722*y>140?"#111":"#fff"}return x(o),(n,t)=>(i(),l("div",C,[e("div",{class:"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-4"},[t[1]||(t[1]=e("h2",{class:"mb-0 text-gradient fw-bold d-flex align-items-center gap-2"},[e("i",{class:"bi bi-trash3"}),r(" Gelöschte Kategorien ")],-1)),e("button",{class:"btn btn-danger d-flex align-items-center gap-2 shadow-sm rounded-pill",onClick:f},t[0]||(t[0]=[e("i",{class:"bi bi-trash-fill"},null,-1),r(" Alle endgültig löschen ")]))]),e("div",S,[e("div",j,[e("table",A,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{style:{"min-width":"130px"}},"Bezeichnung"),e("th",null,"Beschreibung"),e("th",null,"Farbe"),e("th",null,"Status"),e("th",{class:"text-end pe-4"},"Aktionen")])],-1)),d.value.length?(i(),l("tbody",L,[(i(!0),l(k,null,v(d.value,s=>(i(),l("tr",{key:s._id},[e("td",T,b(s.bezeichnung),1),e("td",W,[s.beschreibung?(i(),l("span",$,b(s.beschreibung),1)):(i(),l("span",z,"–"))]),e("td",null,[e("span",{class:"badge d-inline-flex align-items-center gap-1",style:K({backgroundColor:s.farbe,color:m(s.farbe),border:"1px solid var(--clr-border)"})},[t[2]||(t[2]=e("i",{class:"bi bi-droplet-half"},null,-1)),r(" "+b(s.farbe),1)],4)]),e("td",null,[s.deleted?(i(),l("span",E,t[3]||(t[3]=[e("i",{class:"bi bi-trash3"},null,-1),r(" Gelöscht ")]))):(i(),l("span",G,t[4]||(t[4]=[e("i",{class:"bi bi-check-circle"},null,-1),r(" Aktiv ")])))]),e("td",I,[e("div",N,[e("button",{class:"btn btn-outline-success btn-sm",onClick:g=>u(s._id),title:"Wiederherstellen"},t[5]||(t[5]=[e("i",{class:"bi bi-arrow-counterclockwise"},null,-1)]),8,V),e("button",{class:"btn btn-outline-danger btn-sm",onClick:g=>p(s._id),title:"Endgültig löschen"},t[6]||(t[6]=[e("i",{class:"bi bi-x-circle"},null,-1)]),8,D)])])]))),128))])):(i(),l("tbody",H,t[7]||(t[7]=[e("tr",null,[e("td",{colspan:"5",class:"text-center text-secondary py-5"},[e("i",{class:"bi bi-emoji-frown fs-3 mb-2 d-block"}),r(" Keine gelöschten Kategorien vorhanden. ")])],-1)])))])])])]))}},Q=F(J,[["__scopeId","data-v-4b878e36"]]);export{Q as default};
