import{j as i,x as n,k as a,l as S,F as p,y as k,v as g,J as E,t as f,r as $,c as x,H as D,I as B,h as b,z as _}from"./auth-p59NCVpB.js";import{_ as F,d as I}from"./index-BaOz1LJw.js";import{E as W}from"./EmptyState-5u2my5Zk.js";const j={class:"table-responsive"},q={class:"table mb-0"},L={key:1},M={class:"text-end"},V=["onClick","disabled"],R=["onClick","disabled"],H={key:0,class:"text-center py-3"},J={__name:"TrashTable",props:{items:{type:Array,required:!0},loading:{type:Boolean,default:!1},type:{type:String,required:!0},fields:{type:Array,required:!0}},setup(d){function u(l){const s=l||"#ccc";let e=s.replace("#","");e.length===3&&(e=e.split("").map(m=>m+m).join(""));const o=parseInt(e,16),h=o>>16&255,v=o>>8&255,w=o&255,C=.2126*h+.7152*v+.0722*w>140?"#111":"#fff";return{backgroundColor:s,color:C,border:"1px solid var(--clr-border)"}}return(l,s)=>(n(),i("div",j,[a("table",q,[a("thead",null,[a("tr",null,[(n(!0),i(p,null,k(d.fields,e=>(n(),i("th",{key:e.key},g(e.label),1))),128)),s[0]||(s[0]=a("th",{class:"text-end"},"Aktionen",-1))])]),a("tbody",null,[(n(!0),i(p,null,k(d.items,e=>(n(),i("tr",{key:e._id},[(n(!0),i(p,null,k(d.fields,o=>(n(),i("td",{key:o.key},[o.badge?(n(),i("span",{key:0,class:"badge d-inline-flex align-items-center gap-1",style:E(u(e[o.key]))},[s[1]||(s[1]=a("i",{class:"bi bi-droplet-half"},null,-1)),f(" "+g(e[o.key]),1)],4)):(n(),i("span",L,g(e[o.key]),1))]))),128)),a("td",M,[a("button",{class:"btn btn-sm btn-outline-success me-1",onClick:o=>l.$emit("restore",d.type,e._id),disabled:d.loading,title:"Wiederherstellen"},s[2]||(s[2]=[a("i",{class:"bi bi-arrow-counterclockwise"},null,-1)]),8,V),a("button",{class:"btn btn-sm btn-outline-danger",onClick:o=>l.$emit("delete",d.type,e._id),disabled:d.loading,title:"Endgültig löschen"},s[3]||(s[3]=[a("i",{class:"bi bi-x-circle"},null,-1)]),8,R)])]))),128))])]),d.loading?(n(),i("div",H,s[4]||(s[4]=[a("div",{class:"spinner-border",role:"status"},null,-1)]))):S("",!0)]))}},O=F(J,[["__scopeId","data-v-34d31df9"]]),G={class:"trash-wrapper container py-4"},Q={class:"nav modern-tabs mb-3",role:"tablist"},U=["onClick"],X={key:0,class:"d-flex justify-content-end mb-3"},Y={__name:"TrashPage",setup(d){const u=I(),l=$("computer"),s=$({computer:[],kategorie:[],os:[]}),e=$({computer:!1,kategorie:!1,os:!1}),o=[{key:"computer",label:"Computer",icon:"bi bi-pc-display",badgeClass:"bg-primary-soft"},{key:"kategorie",label:"Kategorien",icon:"bi bi-tags",badgeClass:"bg-warning-soft"},{key:"os",label:"Betriebssysteme",icon:"bi bi-windows",badgeClass:"bg-info-soft"}],h={computer:[{key:"dnsName",label:"DNS"},{key:"marke",label:"Marke"},{key:"ram",label:"RAM"}],kategorie:[{key:"bezeichnung",label:"Bezeichnung"},{key:"farbe",label:"Farbe",badge:!0}],os:[{key:"name",label:"Name"}]},v=x(()=>h[l.value]),w={computer:"bi bi-pc-display",kategorie:"bi bi-tags",os:"bi bi-windows"},T=x(()=>w[l.value]),C=x(()=>({computer:"Kein gelöschter Computer gefunden.",kategorie:"Keine gelöschte Kategorie im Papierkorb.",os:"Keine gelöschten Betriebssysteme."})[l.value]);async function m(){e.value.computer=!0;try{const r=await b.get("/computer/trash/list");s.value.computer=r.data.filter(t=>t.deleted)}finally{e.value.computer=!1}}async function P(){e.value.kategorie=!0;try{const r=await b.get("/kategorie/trash/list");s.value.kategorie=r.data.filter(t=>t.deleted)}finally{e.value.kategorie=!1}}async function K(){e.value.os=!0;try{const r=await b.get("/betriebssystem/trash/list");s.value.os=r.data.filter(t=>t.deleted)}finally{e.value.os=!1}}function y(){m(),P(),K()}async function N(r,t){const c={computer:`/computer/${t}/restore`,kategorie:`/kategorie/${t}/restore`,os:`/betriebssystem/${t}/restore`}[r];try{await b.patch(c),u.show(`${r==="computer"?"Computer":r==="kategorie"?"Kategorie":"Betriebssystem"} wiederhergestellt!`,"success"),y()}catch{u.show("Fehler beim Wiederherstellen","danger")}}async function A(r,t){if(!confirm("Wirklich endgültig löschen?"))return;const c={computer:`/computer/${t}`,kategorie:`/kategorie/${t}`,os:`/betriebssystem/${t}`}[r];try{await b.delete(c),u.show("Endgültig gelöscht!","success"),y()}catch{u.show("Fehler beim Löschen","danger")}}async function z(r){if(!confirm("Wirklich den gesamten Papierkorb endgültig löschen?"))return;const t={computer:"/computer/hard-delete-all",kategorie:"/kategorie/hard-delete-all",os:"/betriebssystem/hard-delete-all"}[r];try{await b.delete(t),u.show("Papierkorb geleert!","success"),y()}catch{u.show("Fehler beim Leeren","danger")}}return D(y),(r,t)=>(n(),i("div",G,[t[2]||(t[2]=a("h2",{class:"mb-4 text-gradient fw-bold d-flex align-items-center gap-2"},[a("i",{class:"bi bi-trash3"}),f(" Papierkorb ")],-1)),a("ul",Q,[(n(),i(p,null,k(o,c=>a("li",{class:"nav-item",role:"presentation",key:c.key},[a("button",{class:_(["nav-link d-flex align-items-center gap-2",{active:l.value===c.key}]),onClick:Z=>l.value=c.key,type:"button"},[a("i",{class:_(c.icon)},null,2),f(" "+g(c.label)+" ",1),a("span",{class:_(["badge",c.badgeClass])},g(s.value[c.key].length),3)],10,U)])),64))]),s.value[l.value].length?(n(),i("div",X,[a("button",{class:"btn btn-outline-danger d-flex align-items-center gap-2",onClick:t[0]||(t[0]=c=>z(l.value))},t[1]||(t[1]=[a("i",{class:"bi bi-trash3"},null,-1),f(" Papierkorb leeren ")]))])):S("",!0),s.value[l.value].length?(n(),B(O,{key:1,items:s.value[l.value],loading:e.value[l.value],type:l.value,fields:v.value,onRestore:N,onDelete:A},null,8,["items","loading","type","fields"])):(n(),B(W,{key:2,icon:T.value,title:"Nichts im Papierkorb",description:C.value},null,8,["icon","description"]))]))}},ae=F(Y,[["__scopeId","data-v-5de4b747"]]);export{ae as default};
