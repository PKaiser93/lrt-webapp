import{r as f,H as K,j as i,k as e,I as F,l as B,t as l,F as C,y as I,h as r,x as o,v as p,J as L}from"./auth-p59NCVpB.js";import{_ as S,d as $}from"./index-BaOz1LJw.js";import j from"./KategorieForm-BA9maF--.js";const N={class:"kategorie-wrapper container py-4"},z={class:"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-4"},V={class:"d-flex flex-wrap gap-2"},D={class:"card shadow-sm rounded-4"},M={class:"card-body p-0 kategorien-card-body"},T={class:"table mb-0"},A={key:0},E={class:"fw-semibold"},H={class:"d-flex align-items-center gap-2"},J={class:"text-muted small"},P={key:0},W={key:1,class:"fst-italic text-secondary"},q={class:"text-end pe-4"},G=["onClick"],O=["onClick"],Q={key:1},R={__name:"KategorieList",setup(U){const a=$(),c=f(!1),d=f(null),u=f([]);function m(n=null){d.value=n,c.value=!0}function h(){c.value=!1,d.value=null}async function y(n){try{n._id?(await r.patch(`/kategorie/${n._id}`,n),a.show("Kategorie aktualisiert","success")):(await r.post("/kategorie",n),a.show("Kategorie angelegt","success")),h(),await b()}catch{a.show("Fehler beim Speichern","danger")}}async function b(){try{u.value=(await r.get("/kategorie")).data}catch{a.show("Fehler beim Laden der Kategorien","danger")}}async function v(n){if(confirm("Wirklich löschen?"))try{await r.patch(`/kategorie/${n}/soft-delete`),a.show("Kategorie in den Papierkorb verschoben","success"),await b()}catch{a.show("Fehler beim Löschen","danger")}}function x(n){if(!n)return"#333";let t=n.replace("#","");t.length===3&&(t=t.split("").map(_=>_+_).join(""));const s=parseInt(t,16),g=s>>16&255,w=s>>8&255,k=s&255;return .2126*g+.7152*w+.0722*k>140?"#111":"#fff"}return K(b),(n,t)=>(o(),i("div",N,[e("div",z,[t[2]||(t[2]=e("h2",{class:"mb-0 text-gradient fw-bold d-flex align-items-center gap-2"},[e("i",{class:"bi bi-tags"}),l(" Kategorien ")],-1)),e("div",V,[e("button",{class:"btn btn-primary d-flex align-items-center gap-2",onClick:t[0]||(t[0]=s=>m())},t[1]||(t[1]=[e("i",{class:"bi bi-plus-circle"},null,-1),l(" Neue Kategorie anlegen ")]))])]),c.value?(o(),F(j,{key:0,editItem:d.value,onClose:h,onSaved:y},null,8,["editItem"])):B("",!0),e("div",D,[e("div",M,[e("table",T,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{style:{"min-width":"130px"}},"Bezeichnung"),e("th",null,"Beschreibung"),e("th",null,"Farbe"),e("th",{class:"text-end pe-4"},"Aktionen")])],-1)),u.value.length?(o(),i("tbody",A,[(o(!0),i(C,null,I(u.value,s=>(o(),i("tr",{key:s._id},[e("td",E,[e("div",H,[t[3]||(t[3]=e("i",{class:"bi bi-tag-fill text-primary"},null,-1)),l(" "+p(s.bezeichnung),1)])]),e("td",J,[s.beschreibung?(o(),i("span",P,p(s.beschreibung),1)):(o(),i("span",W,"–"))]),e("td",null,[e("span",{class:"badge d-inline-flex align-items-center gap-1",style:L({backgroundColor:s.farbe,color:x(s.farbe),border:"1px solid var(--clr-border)"})},[t[4]||(t[4]=e("i",{class:"bi bi-droplet-half"},null,-1)),l(" "+p(s.farbe),1)],4)]),e("td",q,[e("button",{onClick:g=>m(s),class:"btn btn-outline-primary btn-sm me-1",title:"Bearbeiten"},t[5]||(t[5]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,G),e("button",{onClick:g=>v(s._id),class:"btn btn-outline-danger btn-sm",title:"Löschen"},t[6]||(t[6]=[e("i",{class:"bi bi-trash3"},null,-1)]),8,O)])]))),128))])):(o(),i("tbody",Q,t[7]||(t[7]=[e("tr",null,[e("td",{colspan:"4",class:"text-center text-secondary py-5"},[e("i",{class:"bi bi-emoji-frown fs-3 mb-2 d-block"}),l(" Keine Kategorien vorhanden ")])],-1)])))])])])]))}},te=S(R,[["__scopeId","data-v-241d747c"]]);export{te as default};
