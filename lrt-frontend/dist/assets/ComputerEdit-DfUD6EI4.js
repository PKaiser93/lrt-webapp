import{r as i,H as I,h as f,j as n,C as y,k as l,l as P,v,F as V,y as U,E as s,G as o,K as b,m as T,t as w,o as M,q,D as R,x as r,z as N}from"./auth-p59NCVpB.js";import{_ as j,d as K,b as L,a as F}from"./index-BaOz1LJw.js";const H={class:"container py-4"},E={key:0,class:"text-center my-5"},G={key:1},O={key:0,class:"alert alert-danger"},$={class:"card"},W={class:"nav modern-tabs",role:"tablist"},J=["onClick"],Q={class:"tab-content"},X={key:0,class:"row g-3"},Y={key:1,class:"row g-3"},Z=["value"],c={key:2,class:"row g-3"},h={key:3,class:"row g-3"},_={key:4,class:"row g-3"},ee={key:5,class:"row g-3"},le=["value"],te={key:6,class:"row g-3"},ae={class:"text-end px-4 pb-4"},se=["disabled"],oe={__name:"ComputerEdit",setup(ne){const g=K(),C=L(),B=F(),S=i(!0),p=i(!1),m=i(""),A=i([]),z=i([]),a=i({marke:"",typ:"",seriennummer:"",dnsName:"",ram:null,cpu:"",grafikkarte:"",chipsatz:"",status:"",betriebssystem:"",version:"",abstraktionsebene:"",kernel:"",ipAdresse:"",macAdresse:"",dhcp:!1,remote:"",raumnummer:"",benutzer:"",betreuer:"",artDerArbeit:"",startdatum:"",abgabe:"",beschaffungsjahr:null,inventarnummer:"",laufendeNummer:null,studPCs:null,studienzuschuss:null,fauInventarnummer:"",kategorie:"",bios:"",tpm:"",info:"",todo:"",ablauf:""}),D=[{key:"info",label:"Geräte‑Info",icon:"bi bi-cpu"},{key:"os",label:"Betriebssystem",icon:"bi bi-windows"},{key:"net",label:"Netzwerk",icon:"bi bi-diagram-3"},{key:"user",label:"Benutzer",icon:"bi bi-person-circle"},{key:"proc",label:"Beschaffung",icon:"bi bi-bag"},{key:"kat",label:"Kategorie",icon:"bi bi-tag"},{key:"other",label:"Sonstiges",icon:"bi bi-info-circle"}],u=i("info");I(async()=>{try{const[d,e,k]=await Promise.all([f.get(`/computer/${C.params.id}`),f.get("/kategorie"),f.get("/betriebssystem")]),t=d.data;Object.assign(a.value,t),a.value.betriebssystem=t.betriebssystem?._id||"",a.value.kategorie=t.kategorie?._id||"",a.value.startdatum=t.startdatum?new Date(t.startdatum).toISOString().substr(0,10):"",a.value.abgabe=t.abgabe?new Date(t.abgabe).toISOString().substr(0,10):"",A.value=e.data,z.value=k.data}catch(d){g.show(d.response?.data?.error||"Fehler beim Laden.","danger")}finally{S.value=!1}});async function x(){p.value=!0,m.value="";const d={...a.value,startdatum:a.value.startdatum?new Date(a.value.startdatum):null,abgabe:a.value.abgabe?new Date(a.value.abgabe):null};try{await f.patch(`/computer/${C.params.id}`,d),g.show("Änderungen gespeichert","success"),B.push("/computer")}catch(e){m.value=e.response?.data?.error||"Speichern fehlgeschlagen.",g.show(m.value,"danger")}finally{p.value=!1}}return(d,e)=>{const k=q("router-link");return r(),n("div",H,[e[78]||(e[78]=y('<div class="d-flex align-items-center mb-4 gap-2" data-v-e5ec7d23><i class="bi bi-pencil-square fs-3 text-primary" data-v-e5ec7d23></i><h2 class="mb-0 fw-bold text-gradient" data-v-e5ec7d23>Computer bearbeiten</h2></div><div class="info-hint" data-v-e5ec7d23><i class="bi bi-info-circle-fill" data-v-e5ec7d23></i><div data-v-e5ec7d23><strong data-v-e5ec7d23>Hinweis:</strong><br data-v-e5ec7d23> Die Felder <strong data-v-e5ec7d23>Marke</strong>, <strong data-v-e5ec7d23>Typ</strong>, <strong data-v-e5ec7d23>Betriebssystem</strong>, <strong data-v-e5ec7d23>DHCP</strong> und <strong data-v-e5ec7d23>Kategorie</strong> sind Pflichtfelder und müssen ausgefüllt werden. <hr data-v-e5ec7d23><strong data-v-e5ec7d23>Marke</strong> und <strong data-v-e5ec7d23>Typ</strong> sind im Tab Computer<br data-v-e5ec7d23><strong data-v-e5ec7d23>Betriebssystem</strong> im Tab Betriebssystem<br data-v-e5ec7d23><strong data-v-e5ec7d23>DHCP</strong> im Tab Netzwerk<br data-v-e5ec7d23><strong data-v-e5ec7d23>Kategorie</strong> im Tab Raum <hr data-v-e5ec7d23> Die <strong data-v-e5ec7d23>Seriennummer</strong> ist <strong data-v-e5ec7d23><i data-v-e5ec7d23>Unique</i></strong>. Sollte keine Seriennummer vorliegen, bitte einen Platzhalter eintragen! </div></div>',2)),S.value?(r(),n("div",E,e[35]||(e[35]=[l("div",{class:"spinner-border text-primary"},null,-1)]))):(r(),n("div",G,[m.value?(r(),n("div",O,v(m.value),1)):P("",!0),l("form",{onSubmit:R(x,["prevent"])},[l("div",$,[l("ul",W,[(r(),n(V,null,U(D,t=>l("li",{class:"nav-item",key:t.key},[l("button",{class:N(["nav-link",{active:u.value===t.key}]),onClick:re=>u.value=t.key,type:"button"},[l("i",{class:N(t.icon+" me-1")},null,2),w(" "+v(t.label),1)],10,J)])),64))]),l("div",Q,[u.value==="info"?(r(),n("div",X,[l("div",null,[e[36]||(e[36]=l("label",{class:"form-label"},"Marke *",-1)),s(l("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.marke=t),required:"",class:"form-control"},null,512),[[o,a.value.marke]])]),l("div",null,[e[38]||(e[38]=l("label",{class:"form-label"},"Typ",-1)),s(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.typ=t),required:"",class:"form-select"},e[37]||(e[37]=[y('<option value="PC" data-v-e5ec7d23>PC</option><option value="Notebook" data-v-e5ec7d23>Notebook</option><option value="Workstation" data-v-e5ec7d23>Workstation</option><option value="Macbook Pro" data-v-e5ec7d23>Macbook Pro</option><option value="iPad Pro" data-v-e5ec7d23>iPad Pro</option>',5)]),512),[[b,a.value.typ]])]),l("div",null,[e[39]||(e[39]=l("label",{class:"form-label"},"Seriennummer *",-1)),s(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.seriennummer=t),required:"",class:"form-control"},null,512),[[o,a.value.seriennummer]])]),l("div",null,[e[40]||(e[40]=l("label",{class:"form-label"},"DNS Name",-1)),s(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.dnsName=t),class:"form-control"},null,512),[[o,a.value.dnsName]])]),l("div",null,[e[41]||(e[41]=l("label",{class:"form-label"},"RAM (GB)",-1)),s(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.ram=t),type:"number",min:"0",class:"form-control"},null,512),[[o,a.value.ram,void 0,{number:!0}]])]),l("div",null,[e[42]||(e[42]=l("label",{class:"form-label"},"CPU",-1)),s(l("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.cpu=t),class:"form-control"},null,512),[[o,a.value.cpu]])]),l("div",null,[e[43]||(e[43]=l("label",{class:"form-label"},"Grafikkarte",-1)),s(l("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.grafikkarte=t),class:"form-control"},null,512),[[o,a.value.grafikkarte]])]),l("div",null,[e[44]||(e[44]=l("label",{class:"form-label"},"Chipsatz",-1)),s(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.chipsatz=t),class:"form-control"},null,512),[[o,a.value.chipsatz]])]),l("div",null,[e[46]||(e[46]=l("label",{class:"form-label"},"Status",-1)),s(l("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.status=t),required:"",class:"form-select"},e[45]||(e[45]=[y('<option value="in_betrieb" data-v-e5ec7d23>In Betrieb</option><option value="bald_ersetzen" data-v-e5ec7d23>Bald ersetzen</option><option value="ausser_betrieb" data-v-e5ec7d23>Außer Betrieb</option><option value="auf_lager" data-v-e5ec7d23>Auf Lager</option><option value="unbekannt" data-v-e5ec7d23>Unbekannt</option>',5)]),512),[[b,a.value.status]])])])):u.value==="os"?(r(),n("div",Y,[l("div",null,[e[48]||(e[48]=l("label",{class:"form-label"},"Betriebssystem *",-1)),s(l("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.betriebssystem=t),required:"",class:"form-select"},[e[47]||(e[47]=l("option",{value:""},"—",-1)),(r(!0),n(V,null,U(z.value,t=>(r(),n("option",{key:t._id,value:t._id},v(t.name),9,Z))),128))],512),[[b,a.value.betriebssystem]])]),l("div",null,[e[49]||(e[49]=l("label",{class:"form-label"},"Version",-1)),s(l("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.version=t),class:"form-control"},null,512),[[o,a.value.version]])]),l("div",null,[e[50]||(e[50]=l("label",{class:"form-label"},"Abstraktionsebene",-1)),s(l("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>a.value.abstraktionsebene=t),class:"form-control"},null,512),[[o,a.value.abstraktionsebene]])]),l("div",null,[e[51]||(e[51]=l("label",{class:"form-label"},"Kernel",-1)),s(l("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.kernel=t),class:"form-control"},null,512),[[o,a.value.kernel]])])])):u.value==="net"?(r(),n("div",c,[l("div",null,[e[52]||(e[52]=l("label",{class:"form-label"},"IP-Adresse",-1)),s(l("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>a.value.ipAdresse=t),class:"form-control"},null,512),[[o,a.value.ipAdresse]])]),l("div",null,[e[53]||(e[53]=l("label",{class:"form-label"},"MAC-Adresse",-1)),s(l("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.macAdresse=t),class:"form-control"},null,512),[[o,a.value.macAdresse]])]),l("div",null,[e[55]||(e[55]=l("label",{class:"form-label"},"DHCP *",-1)),s(l("select",{"onUpdate:modelValue":e[15]||(e[15]=t=>a.value.dhcp=t),required:"",class:"form-select"},e[54]||(e[54]=[l("option",{value:!0},"Ja",-1),l("option",{value:!1},"Nein",-1)]),512),[[b,a.value.dhcp]])]),l("div",null,[e[56]||(e[56]=l("label",{class:"form-label"},"Remote",-1)),s(l("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>a.value.remote=t),class:"form-control"},null,512),[[o,a.value.remote]])]),l("div",null,[e[57]||(e[57]=l("label",{class:"form-label"},"Raumnummer *",-1)),s(l("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>a.value.raumnummer=t),required:"",class:"form-control"},null,512),[[o,a.value.raumnummer]])])])):u.value==="user"?(r(),n("div",h,[l("div",null,[e[58]||(e[58]=l("label",{class:"form-label"},"Benutzer",-1)),s(l("input",{"onUpdate:modelValue":e[18]||(e[18]=t=>a.value.benutzer=t),class:"form-control"},null,512),[[o,a.value.benutzer]])]),l("div",null,[e[59]||(e[59]=l("label",{class:"form-label"},"Betreuer",-1)),s(l("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>a.value.betreuer=t),class:"form-control"},null,512),[[o,a.value.betreuer]])]),l("div",null,[e[60]||(e[60]=l("label",{class:"form-label"},"Art der Arbeit",-1)),s(l("input",{"onUpdate:modelValue":e[20]||(e[20]=t=>a.value.artDerArbeit=t),class:"form-control"},null,512),[[o,a.value.artDerArbeit]])]),l("div",null,[e[61]||(e[61]=l("label",{class:"form-label"},"Startdatum",-1)),s(l("input",{type:"date","onUpdate:modelValue":e[21]||(e[21]=t=>a.value.startdatum=t),class:"form-control"},null,512),[[o,a.value.startdatum]])]),l("div",null,[e[62]||(e[62]=l("label",{class:"form-label"},"Abgabe/Vortrag",-1)),s(l("input",{type:"date","onUpdate:modelValue":e[22]||(e[22]=t=>a.value.abgabe=t),class:"form-control"},null,512),[[o,a.value.abgabe]])])])):u.value==="proc"?(r(),n("div",_,[l("div",null,[e[63]||(e[63]=l("label",{class:"form-label"},"Beschaffungsjahr",-1)),s(l("input",{"onUpdate:modelValue":e[23]||(e[23]=t=>a.value.beschaffungsjahr=t),type:"number",class:"form-control"},null,512),[[o,a.value.beschaffungsjahr,void 0,{number:!0}]])]),l("div",null,[e[64]||(e[64]=l("label",{class:"form-label"},"Inventarnummer",-1)),s(l("input",{"onUpdate:modelValue":e[24]||(e[24]=t=>a.value.inventarnummer=t),class:"form-control"},null,512),[[o,a.value.inventarnummer]])]),l("div",null,[e[65]||(e[65]=l("label",{class:"form-label"},"Laufende Nummer",-1)),s(l("input",{"onUpdate:modelValue":e[25]||(e[25]=t=>a.value.laufendeNummer=t),type:"number",class:"form-control"},null,512),[[o,a.value.laufendeNummer,void 0,{number:!0}]])]),l("div",null,[e[66]||(e[66]=l("label",{class:"form-label"},"StudPCs",-1)),s(l("input",{"onUpdate:modelValue":e[26]||(e[26]=t=>a.value.studPCs=t),type:"number",class:"form-control"},null,512),[[o,a.value.studPCs,void 0,{number:!0}]])]),l("div",null,[e[67]||(e[67]=l("label",{class:"form-label"},"Studienzuschuss",-1)),s(l("input",{"onUpdate:modelValue":e[27]||(e[27]=t=>a.value.studienzuschuss=t),type:"number",class:"form-control"},null,512),[[o,a.value.studienzuschuss,void 0,{number:!0}]])]),l("div",null,[e[68]||(e[68]=l("label",{class:"form-label"},"FAU Inventarnummer",-1)),s(l("input",{"onUpdate:modelValue":e[28]||(e[28]=t=>a.value.fauInventarnummer=t),class:"form-control"},null,512),[[o,a.value.fauInventarnummer]])])])):u.value==="kat"?(r(),n("div",ee,[l("div",null,[e[70]||(e[70]=l("label",{class:"form-label"},"Kategorie *",-1)),s(l("select",{"onUpdate:modelValue":e[29]||(e[29]=t=>a.value.kategorie=t),required:"",class:"form-select"},[e[69]||(e[69]=l("option",{value:""},"—",-1)),(r(!0),n(V,null,U(A.value,t=>(r(),n("option",{key:t._id,value:t._id},v(t.bezeichnung),9,le))),128))],512),[[b,a.value.kategorie]])])])):u.value==="other"?(r(),n("div",te,[l("div",null,[e[71]||(e[71]=l("label",{class:"form-label"},"BIOS",-1)),s(l("input",{"onUpdate:modelValue":e[30]||(e[30]=t=>a.value.bios=t),class:"form-control"},null,512),[[o,a.value.bios]])]),l("div",null,[e[72]||(e[72]=l("label",{class:"form-label"},"TPM",-1)),s(l("input",{"onUpdate:modelValue":e[31]||(e[31]=t=>a.value.tpm=t),class:"form-control"},null,512),[[o,a.value.tpm]])]),l("div",null,[e[73]||(e[73]=l("label",{class:"form-label"},"Info",-1)),s(l("input",{"onUpdate:modelValue":e[32]||(e[32]=t=>a.value.info=t),class:"form-control"},null,512),[[o,a.value.info]])]),l("div",null,[e[74]||(e[74]=l("label",{class:"form-label"},"ToDo",-1)),s(l("input",{"onUpdate:modelValue":e[33]||(e[33]=t=>a.value.todo=t),class:"form-control"},null,512),[[o,a.value.todo]])]),l("div",null,[e[75]||(e[75]=l("label",{class:"form-label"},"Ablauf",-1)),s(l("input",{"onUpdate:modelValue":e[34]||(e[34]=t=>a.value.ablauf=t),class:"form-control"},null,512),[[o,a.value.ablauf]])])])):P("",!0)]),l("div",ae,[l("button",{class:"btn btn-gradient",type:"submit",disabled:p.value},[e[76]||(e[76]=l("i",{class:"bi bi-save me-1"},null,-1)),w(" "+v(p.value?"Speichern …":"Speichern"),1)],8,se),T(k,{class:"btn btn-outline-secondary ms-3",to:"/computer"},{default:M(()=>e[77]||(e[77]=[l("i",{class:"bi bi-x-lg me-1"},null,-1),w(" Abbrechen ")])),_:1,__:[77]})])])],32)]))])}}},de=j(oe,[["__scopeId","data-v-e5ec7d23"]]);export{de as default};
