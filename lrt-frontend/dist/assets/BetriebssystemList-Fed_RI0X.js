import{j as a,x as r,k as e,t as m,z as g,v as _,r as f,c as B,H as I,I as v,l as $,E as C,G as L,u as S,F,y as N}from"./auth-p59NCVpB.js";import{u as A}from"./betriebssystemStore-DJDJTNgq.js";import{_ as x,d as T}from"./index-BaOz1LJw.js";import D from"./BetriebssystemForm-DX1sb4W8.js";const V={class:"align-middle"},E={class:"text-end align-middle"},O={class:"d-inline-flex gap-2"},j=["disabled"],z={key:0,class:"spinner-border spinner-border-sm"},M={key:1,class:"bi bi-trash"},R={__name:"BetriebssystemTableRow",props:{item:{type:Object,required:!0},deletingId:[String,Number]},emits:["delete","edit"],setup(n,{emit:i}){const o=i;function c(d){const t=(d||"").toLowerCase();return t.includes("windows")?"bi-windows text-primary":t.includes("ubuntu")?"bi-ubuntu text-warning":t.includes("linux")?"bi-linux text-success":/mac|osx|ipad|ios/.test(t)?"bi-apple text-dark":t.includes("android")?"bi-android text-success":t.includes("drucker")?"bi-printer text-secondary":t.includes("3d")?"bi-badge-3d text-secondary":t.includes("andere")?"bi-three-dots text-secondary":"bi-cpu text-secondary"}return(d,t)=>(r(),a("tr",{class:g({"table-danger":n.deletingId===n.item._id})},[e("td",V,[e("i",{class:g(`${c(n.item.name)} me-2 fs-md`)},null,2),m(" "+_(n.item.name),1)]),e("td",E,[e("div",O,[e("button",{class:"btn btn-outline btn-sm btn-icon",onClick:t[0]||(t[0]=b=>o("edit",n.item)),title:"Bearbeiten"},t[2]||(t[2]=[e("i",{class:"bi bi-pencil"},null,-1)])),e("button",{class:"btn btn-outline-danger btn-sm btn-icon",disabled:n.deletingId===n.item._id,onClick:t[1]||(t[1]=b=>o("delete",n.item._id)),title:"Löschen"},[n.deletingId===n.item._id?(r(),a("span",z)):(r(),a("i",M))],8,j)])])],2))}},q=x(R,[["__scopeId","data-v-8df0fd32"]]),G={class:"os-list-container"},H={class:"os-list-header"},K={class:"d-flex gap-2 flex-wrap"},U={class:"os-list-actions d-flex flex-wrap align-items-center mb-3 gap-3"},W={class:"input-group search-group"},J={key:1,class:"text-center py-5"},P={key:2},Q={key:0,class:"alert alert-info text-center py-5"},X={key:1,class:"table-responsive rounded-4 shadow-sm"},Y={class:"table table-hover align-middle mb-0 os-table"},Z={__name:"BetriebssystemList",setup(n){const i=A(),o=T(),c=f(!1),d=f(null),t=f("");function b(l=null){d.value=l,c.value=!0}function p(){c.value=!1,d.value=null}async function h(l){if(confirm("Wirklich löschen?"))try{await i.delete(l),o.show("Betriebssystem gelöscht","success"),await i.fetchAll()}catch{o.show(i.error||"Fehler beim Löschen","danger")}}async function w(l){try{l._id?(await i.update(l._id,l),o.show("Betriebssystem gespeichert","success")):(await i.create(l),o.show("Betriebssystem neu angelegt","success")),p(),await i.fetchAll()}catch{o.show(i.error||"Fehler beim Speichern","danger")}}const y=B(()=>i.items.filter(l=>!t.value||l.name?.toLowerCase().includes(t.value.toLowerCase())));return I(()=>{i.fetchAll()}),(l,s)=>(r(),a("div",G,[e("div",H,[s[3]||(s[3]=e("div",null,[e("h2",{class:"mb-0 text-gradient d-flex align-items-center gap-2"},[e("i",{class:"bi bi-microsoft"}),m(" Betriebssysteme ")]),e("div",{class:"subtitle"},"Alle aktiven Betriebssysteme in der Datenbank")],-1)),e("div",K,[e("button",{class:"btn btn-primary d-flex align-items-center gap-2",onClick:s[0]||(s[0]=u=>b())},s[2]||(s[2]=[e("i",{class:"bi bi-plus-circle"},null,-1),m(" Neues OS anlegen ")]))])]),c.value?(r(),v(D,{key:0,item:d.value,onClose:p,onSaved:w},null,8,["item"])):$("",!0),e("div",U,[e("div",W,[s[4]||(s[4]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-search"})],-1)),C(e("input",{"onUpdate:modelValue":s[1]||(s[1]=u=>t.value=u),class:"form-control",placeholder:"Suchen …"},null,512),[[L,t.value]])])]),S(i).isLoading?(r(),a("div",J,s[5]||(s[5]=[e("span",{class:"spinner-border text-primary"},null,-1)]))):(r(),a("div",P,[y.value.length?(r(),a("div",X,[e("table",Y,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",null,[e("i",{class:"bi bi-ubuntu me-2"}),m("Name")]),e("th",{class:"text-end"},"Aktionen")])],-1)),e("tbody",null,[(r(!0),a(F,null,N(y.value,(u,k)=>(r(),v(q,{key:u._id,item:u,index:k+1,onEdit:b,onDelete:h},null,8,["item","index"]))),128))])])])):(r(),a("div",Q,s[6]||(s[6]=[e("i",{class:"bi bi-info-circle me-2"},null,-1),m(" Keine Betriebssysteme gefunden. ")])))]))]))}},ne=x(Z,[["__scopeId","data-v-0672ce98"]]);export{ne as default};
