import{r as _,H as f,j as n,k as t,t as p,l as o,F as v,y as g,h as y,x as a,v as i,z as k}from"./auth-p59NCVpB.js";import{_ as x,d as w}from"./index-BaOz1LJw.js";const C={class:"privacy-wrapper container py-4"},S={class:"card shadow-sm rounded-4 border-0"},j={class:"card-body p-0"},q={key:0,class:"py-5 text-center"},D={key:1},$={class:"table table-hover align-middle mb-0 table-striped"},F={class:"d-inline-flex gap-2"},R=["onClick"],T=["onClick"],z=["onClick"],A=["href"],B={key:0},L={__name:"PrivacyRequests",setup(N){const r=w(),c=_([]),u=_(!1);function h(l){return new Date(l).toLocaleString()}async function b(){u.value=!0;try{const l=await y.get("/admin/privacy/requests");c.value=l.data}catch{r.show("Fehler beim Laden","danger")}finally{u.value=!1}}async function d(l,s){try{await y.patch(`/admin/privacy/requests/${l._id}`,{status:s}),r.show(`Status auf "${s}" gesetzt`,"success"),await b()}catch{r.show("Fehler beim Aktualisieren","danger")}}return f(b),(l,s)=>(a(),n("div",C,[s[4]||(s[4]=t("h2",{class:"mb-4 text-gradient fw-bold d-flex align-items-center gap-2"},[t("i",{class:"bi bi-shield-lock-fill"}),p(" Dataâ€‘Privacy Toolkit ")],-1)),t("div",S,[t("div",j,[u.value?(a(),n("div",q,s[0]||(s[0]=[t("span",{class:"spinner-border text-primary"},null,-1)]))):(a(),n("div",D,[t("table",$,[s[3]||(s[3]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"User"),t("th",null,"Typ"),t("th",null,"Status"),t("th",null,"Erstellt"),t("th",null,"Aktionen")])],-1)),t("tbody",null,[(a(!0),n(v,null,g(c.value,e=>(a(),n("tr",{key:e._id},[t("td",null,[p(i(e.user.username),1),s[1]||(s[1]=t("br",null,null,-1)),t("small",null,i(e.user.email),1)]),t("td",null,i(e.type),1),t("td",null,[t("span",{class:k({"text-secondary":e.status==="pending","text-info":e.status==="in_progress","text-success":e.status==="complete","text-danger":e.status==="rejected"})},i(e.status),3)]),t("td",null,i(h(e.createdAt)),1),t("td",null,[t("div",F,[e.status==="pending"?(a(),n("button",{key:0,class:"btn btn-sm btn-outline-info",onClick:m=>d(e,"in_progress")},"Start",8,R)):o("",!0),e.status!=="complete"?(a(),n("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:m=>d(e,"complete")},"Done",8,T)):o("",!0),e.status!=="rejected"?(a(),n("button",{key:2,class:"btn btn-sm btn-outline-danger",onClick:m=>d(e,"rejected")},"Reject",8,z)):o("",!0),e.fileUrl?(a(),n("a",{key:3,href:e.fileUrl,class:"btn btn-sm btn-outline-primary",target:"_blank"},"Download",8,A)):o("",!0)])])]))),128)),c.value.length?o("",!0):(a(),n("tr",B,s[2]||(s[2]=[t("td",{colspan:"5",class:"text-center text-muted py-4"},[t("i",{class:"bi bi-emoji-frown"}),p(" Keine Requests. ")],-1)])))])])]))])])]))}},V=x(L,[["__scopeId","data-v-0384cd20"]]);export{V as default};
