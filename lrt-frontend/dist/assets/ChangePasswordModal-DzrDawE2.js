import{r,j as i,k as s,D as b,t as d,l as c,v as w,E as u,G as p,F as x,x as m,h as y}from"./auth-p59NCVpB.js";import{_ as k,d as h}from"./index-BaOz1LJw.js";const _={class:"modal fade show d-block",tabindex:"-1"},C={class:"modal-dialog modal-dialog-centered modal-md"},N={class:"modal-content rounded-4 shadow-lg overflow-hidden"},S={class:"modal-header border-0 bg-gradient-header text-white py-3"},V={class:"modal-body p-4"},$={key:0,class:"alert alert-danger d-flex align-items-center mb-4"},D={class:"mb-3"},M={class:"input-group"},q={class:"mb-3"},A={class:"input-group"},B={class:"mb-4"},F={class:"input-group"},T={class:"modal-footer border-0 px-4 pb-4 d-flex justify-content-end gap-2"},U=["disabled"],j=["disabled"],E={key:0,class:"spinner-border spinner-border-sm me-1"},G={__name:"ChangePasswordModal",emits:["close"],setup(I,{emit:v}){const f=v,g=h(),t=r({currentPassword:"",newPassword:"",confirmPassword:""}),a=r(""),l=r(!1);async function P(){if(a.value="",t.value.newPassword!==t.value.confirmPassword){a.value="Die neuen Passwörter stimmen nicht überein.";return}l.value=!0;try{await y.post("/profile/password",{currentPassword:t.value.currentPassword,newPassword:t.value.newPassword}),g.show("Passwort geändert","success"),f("close")}catch(n){a.value=n.response?.data?.error||"Fehler beim Ändern"}finally{l.value=!1}}return(n,e)=>(m(),i(x,null,[s("div",{class:"modal-backdrop fade show",onClick:e[0]||(e[0]=b(o=>n.$emit("close"),["self"]))}),s("div",_,[s("div",C,[s("div",N,[s("form",{onSubmit:b(P,["prevent"])},[s("div",S,[e[6]||(e[6]=s("h5",{class:"modal-title d-flex align-items-center gap-2"},[s("i",{class:"bi bi-key-fill"}),d(" Passwort ändern ")],-1)),s("button",{type:"button",class:"btn-close btn-close-white",onClick:e[1]||(e[1]=o=>n.$emit("close")),"aria-label":"Schließen"})]),s("div",V,[a.value?(m(),i("div",$,[e[7]||(e[7]=s("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),s("span",null,w(a.value),1)])):c("",!0),s("div",D,[e[9]||(e[9]=s("label",{class:"form-label"},"Altes Passwort",-1)),s("div",M,[e[8]||(e[8]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-lock-fill"})],-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.currentPassword=o),type:"password",class:"form-control",placeholder:"Altes Passwort",required:""},null,512),[[p,t.value.currentPassword]])])]),s("div",q,[e[11]||(e[11]=s("label",{class:"form-label"},"Neues Passwort",-1)),s("div",A,[e[10]||(e[10]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-lock"})],-1)),u(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.newPassword=o),type:"password",class:"form-control",placeholder:"Neues Passwort",required:""},null,512),[[p,t.value.newPassword]])])]),s("div",B,[e[13]||(e[13]=s("label",{class:"form-label"},"Neues Passwort bestätigen",-1)),s("div",F,[e[12]||(e[12]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-lock"})],-1)),u(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.confirmPassword=o),type:"password",class:"form-control",placeholder:"Passwort bestätigen",required:""},null,512),[[p,t.value.confirmPassword]])])])]),s("div",T,[s("button",{type:"button",class:"btn btn-outline-gradient d-flex align-items-center gap-1",onClick:e[5]||(e[5]=o=>n.$emit("close")),disabled:l.value},e[14]||(e[14]=[s("i",{class:"bi bi-x-lg"},null,-1),d(" Abbrechen ")]),8,U),s("button",{type:"submit",class:"btn btn-gradient d-flex align-items-center gap-1",disabled:l.value},[l.value?(m(),i("span",E)):c("",!0),e[15]||(e[15]=s("i",{class:"bi bi-check-lg"},null,-1)),d(" "+w(l.value?"Speichern…":"Speichern"),1)],8,j)])],32)])])])],64))}},J=k(G,[["__scopeId","data-v-f6258283"]]);export{J as default};
